<!DOCTYPE html>
<html lang="en">
<html xmlns:th="http://www.thymeleaf.org">
<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon"th:href="@{/images/01.jpg}" />
   <title>内部成员首页</title>
   <link rel="shortcut icon"th:href="@{/images/01.jpg}" />
   <link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body>
   <!-- <div id="loading"><div id="loading-center"></div></div> -->
   <div class="wrapper" id="app">
      <div class="iq-sidebar">
         <div class="iq-sidebar-logo d-flex justify-content-between">
            <a href="/Index">
               <!-- <img src="images/01.jpg" class="img-fluid" alt=""> -->
               <span>湛小鲜后台管理</span>
            </a>

         </div>
         <div id="sidebar-scrollbar">
            <nav class="iq-sidebar-menu">
               <ul class="iq-menu">

                  <li class="active">
                     <a href="/Index" class="iq-waves-effect"><i
                             class="ri-home-8-fill"></i><span>内部成员首页</span></a>
                  </li>

                  <li>
                     <a href="javascript:void(0);" class="iq-waves-effect"><i
                             class="ri-settings-5-fill"></i><span>营销情况</span><i
                             class="ri-arrow-right-s-line iq-arrow-right"></i></a>
                     <ul class="iq-submenu">
                        <li><a href="/Index">营销情况</a></li>
                     </ul>
                  </li>

                  <li>
                     <a href="javascript:void(0);" class="iq-waves-effect"><i
                             class="ri-user-settings-fill"></i><span>商品管理 </span><i
                             class="ri-arrow-right-s-line iq-arrow-right"></i></a>
                     <ul class="iq-submenu">
                        <li><a href="/CommodityList">商品列表</a></li>
                     </ul>
                  </li>
                  <li>
                     <a href="javascript:void(0);" class="iq-waves-effect"><i class="ri-todo-fill"></i><span>订单管理
                        </span><i class="ri-arrow-right-s-line iq-arrow-right"></i></a>
                     <ul class="iq-submenu">
                        <li><a href="/Orders">订单管理</a></li>
                     </ul>
                  </li>
                  <!--                    <li>-->
<!--                        <a href="javascript:void(0);" class="iq-waves-effect"><i-->
<!--                                class="ri-file-edit-fill"></i><span>快递管理</span><i-->
<!--                                class="ri-arrow-right-s-line iq-arrow-right"></i></a>-->
<!--                        <ul class="iq-submenu">-->
<!--                            <li><a href="/Address">快递地址管理</a></li>-->
<!--                            <li><a href="/Delivery">配送管理</a></li>-->
<!--                        </ul>-->
<!--                    </li>-->

                  <li>
                     <a href="javascript:void(0);" class="iq-waves-effect"><i
                             class="ri-alarm-warning-fill"></i><span>优惠券 </span><i
                             class="ri-arrow-right-s-line iq-arrow-right"></i></a>
                     <ul class="iq-submenu">
                        <li><a href="/Coupons">优惠券</a></li>
                     </ul>
                  </li>
                  <li>
                     <a href="javascript:void(0);" class="iq-waves-effect"><i
                             class="ri-bar-chart-2-fill"></i><span>员工管理
                        </span><i class="ri-arrow-right-s-line iq-arrow-right"></i></a>
                     <ul class="iq-submenu">
                        <li><a href="/HireUser_management">员工管理 </a></li>
                     </ul>
                  </li>
                  <li>
                     <a href="javascript:void(0);" class="iq-waves-effect"><i class="ri-barricade-fill"></i><span>内部成员管理
                        </span><i class="ri-arrow-right-s-line iq-arrow-right"></i></a>
                     <ul class="iq-submenu">
                        <li><a href="/InternalUser_management">内部成员管理 </a></li>
                     </ul>
                  </li>
                  <li>
                     <a href="javascript:void(0);" class="iq-waves-effect"><i class="ri-battery-2-charge-line"></i><span>顾客管理
                        </span><i class="ri-arrow-right-s-line iq-arrow-right"></i></a>
                     <ul class="iq-submenu">
                        <li><a href="/User_management">顾客管理 </a></li>
                     </ul>
                  </li>
                  <li>
                     <a href="javascript:void(0);" class="iq-waves-effect"><i
                             class="ri-pie-chart-2-fill"></i><span>个人中心
                        </span><i class="ri-arrow-right-s-line iq-arrow-right"></i></a>
                     <ul class="iq-submenu">
                        <li><a href="/Mine">查看个人信息</a></li>
                        <!--<li><a href="/Member_info">查看成员信息</a></li>-->
                        <!--                                <li><a href="/Modify_Info">修改个人信息</a></li>-->
                        <li><a href="/Boss_management">注册账号</a></li>
                     </ul>
                  </li>

               </ul>
            </nav>
            <div class="p-3"></div>
         </div>
      </div>

      <!-- Page Content  -->
      <div id="content-page" class="content-page">
         <!-- TOP Nav Bar -->
         <div class="iq-top-navbar">
            <div class="iq-navbar-custom">

               <nav class="navbar navbar-expand-lg navbar-light p-0">
                  <div class="iq-search-bar">
                     <form action="#" class="searchbox">
                        <!-- 按照编号查找 -->
                        <span class="text search-input keyword">欢迎来到湛小鲜后台管理系统</span>
                     </form>
                  </div>
                  <div class="collapse navbar-collapse" id="navbarSupportedContent">
                     <ul class="navbar-nav ml-auto navbar-list">
                        <!-- 全屏图标 -->
                        <li class="nav-item iq-full-screen">
                           <a href="#" class="iq-waves-effect" id="btnFullscreen"><i class="ri-fullscreen-line"></i></a>
                        </li>
                     </ul>
                  </div>
                  <ul class="navbar-list">
                     <li>
                        <a href="#" class="search-toggle iq-waves-effect d-flex align-items-center">
                           <img th:src="@{/images/01.jpg}" class="img-fluid rounded mr-3" alt="boss">
                           <div class="caption">
                              <h6 class="mb-0 line-height">湛小鲜</h6>
                              <span class="font-size-12">管理员</span>
                           </div>
                        </a>
                        <div class="iq-sub-dropdown iq-boss-dropdown">
                           <div class="iq-card shadow-none m-0">
                              <div class="iq-card-body p-0 ">
                                 <div class="bg-primary p-3">
                                    <h5 class="mb-0 text-white line-height">你好-湛小鲜</h5>
                                 </div>
                                 <a href="/Mine" class="iq-sub-card iq-bg-primary-hover">
                                    <div class="media align-items-center">
                                       <div class="rounded iq-card-icon iq-bg-primary">
                                          <i class="ri-file-boss-line"></i>
                                       </div>
                                       <div class="media-body ml-3">
                                          <h6 class="mb-0 ">个人中心</h6>
                                       </div>
                                    </div>
                                 </a>
<!--                                 <a href="/Modify_Info" class="iq-sub-card iq-bg-primary-hover">-->
<!--                                    <div class="media align-items-center">-->
<!--                                       <div class="rounded iq-card-icon iq-bg-primary">-->
<!--                                          <i class="ri-profile-line"></i>-->
<!--                                       </div>-->
<!--                                       <div class="media-body ml-3">-->
<!--                                          <h6 class="mb-0 ">修改个人信息</h6>-->
<!--                                       </div>-->
<!--                                    </div>-->
<!--                                 </a>-->
                                 <div class="d-inline-block w-100 text-center p-3">
                                    <a class="bg-primary iq-sign-btn" href="/Login" role="button">退出登录<i
                                            class="ri-login-box-line ml-2"></i></a>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </li>
                  </ul>
               </nav>

            </div>
         </div>
         <!-- TOP Nav Bar END -->
         <div class="container-fluid">
            <div class="row">
               <div class="col-lg-12">
                  <div class="row">
                     <div class="col-md-6 col-lg-3">
                        <div class="iq-card">
                           <div class="iq-card-body iq-bg-money rounded">
                              <div class="d-flex align-items-center justify-content-between">
                                 <div class="rounded-circle iq-card-icon bg-money"><i class="ri-numbers-fill"></i></div>
                                 <div class="text-right">
                                    <h2 class="mb-0">
                                       <span class="counter" v-if="totalSales == 'null'">暂无数据</span>
                                       <span class="counter" v-else>{{totalSales}}</span>
                                    </h2>
                                    <h5 class="">总营业额</h5>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class="col-md-6 col-lg-3">
                        <div class="iq-card">
                           <div class="iq-card-body iq-bg-list rounded">
                              <div class="d-flex align-items-center justify-content-between">
                                 <div class="rounded-circle iq-card-icon bg-list"><i class="ri-pie-chart-2-fill"></i>
                                 </div>
                                 <div class="text-right">
                                    <h2 class="mb-0">
                                       <span class="counter" v-if="totalOrderNumber == 'null'">暂无数据</span>
                                       <span class="counter" v-else>{{totalOrderNumber}}</span>
                                    </h2>
                                    <h5 class="">订单总数</h5>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class="col-md-6 col-lg-3">
                        <div class="iq-card">
                           <div class="iq-card-body iq-bg-xiaoliang rounded">
                              <div class="d-flex align-items-center justify-content-between">
                                 <div class="rounded-circle iq-card-icon bg-xiaoliang"><i
                                       class="ri-calendar-todo-fill"></i></div>
                                 <div class="text-right">
                                    <h2 class="mb-0">
                                       <span class="counter" v-if="totalSellNumber == 'null'">暂无数据</span>
                                       <span class="counter" v-else>{{totalSellNumber}}</span>
                                    </h2>
                                    <h5 class="">总销售量</h5>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class="col-md-6 col-lg-3">
                        <div class="iq-card">
                           <div class="iq-card-body iq-bg-chengben rounded">
                              <div class="d-flex align-items-center justify-content-between">
                                 <div class="rounded-circle iq-card-icon bg-chengben"><i class="ri-newspaper-fill"></i>
                                 </div>
                                 <div class="text-right">
                                    <h2 class="mb-0">
                                       <span class="counter" v-if="totalUserNumber == 'null'">暂无数据</span>
                                       <span class="counter" v-else>{{totalUserNumber}}</span>
                                    </h2>
                                    <h5 class="">顾客总数</h5>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>

               <div class="col-md-12">
                  <div class="iq-card">
                     <div class="iq-card-header d-flex justify-content-between">
                        <div class="iq-header-title">
                           <h4 class="card-title">总利润统计</h4>
                        </div>
                     </div>
                     <div class="iq-card-body">
                        <div v-if="totalSales == 'null'"><h1>暂无数据</h1></div>
                        <div id="echart1" v-else style="height: 220px;"></div>
                     </div>
                  </div>
               </div>

               <div class="col-md-12">
                  <div class="iq-card">
                     <div class="iq-card-header d-flex justify-content-between">
                        <div class="iq-header-title">
                           <h4 class="card-title">订单总数</h4>
                        </div>
                     </div>
                     <div class="iq-card-body">
                        <div v-if="totalOrderNumber == 'null'"><h1>暂无数据</h1></div>
                        <div id="echart2" v-else style=" height: 523.6px; width: auto;"></div>
                     </div>
                  </div>
               </div>
<!--               <div class="col-md-6">-->
<!--                  <div class="iq-card">-->
<!--                     <div class="iq-card-header d-flex justify-content-between">-->
<!--                        <div class="iq-header-title">-->
<!--                           <h4 class="card-title">顾客总数</h4>-->
<!--                        </div>-->
<!--                     </div>-->
<!--                     <div class="iq-card-body">-->
<!--                        <div id="echart3" style=" height: 523.6px; width: auto;"></div>-->
<!--                     </div>-->
<!--                  </div>-->
<!--               </div>-->

               <div class="col-md-12">
                  <div class="iq-card">
                     <div class="iq-card-header d-flex justify-content-between">
                        <div class="iq-header-title">
                           <h4 class="card-title">销量统计</h4>
                        </div>
                     </div>
                     <div class="iq-card-body">
                        <div v-if="totalSellNumber == 'null'"><h1>暂无数据</h1></div>
                        <div id="echart4" v-else style=" height: 520px;"></div>
                     </div>
                  </div>
               </div>

            </div>

         </div>

      </div>
   </div>
   <!-- Wrapper END -->
   <script th:src="@{/js/jquery.min.js}"></script>
   <script th:src="@{/js/bootstrap.min.js}"></script>
   <script th:src="@{/js/custom.js}"></script>
   <script th:src="@{/js/smooth-scrollbar.js}"></script>
   <script th:src="@{/js/echarts.min.js}"></script>
   <script th:src="@{/js/axios-0.18.0.js}"></script>
   <script th:src="@{/js/vue.js}"></script>
   <script>

      new Vue({
         el: '#app',
         data: {
            totalSales:"",
            totalOrderNumber:"",
            totalSellNumber:"",
            totalUserNumber:""
         },

         mounted() {//页面初始化方法
            this.countInformation();
         },
         methods: {
            countInformation:function(){
               axios.get('/countInformation').then(response =>{
                  console.log(response.data.data)
                  this.totalSales =  response.data.data.totalSales,
                          this.totalOrderNumber =  response.data.data.totalOrderNumber,
                          this.totalSellNumber =  response.data.data.totalSellNumber,
                          this.totalUserNumber =  response.data.data.totalUserNumber
               }).catch(function (error) {
                  console.log(error)
               })
            }
         }

      })


      //总营业额的图表
      new Vue({
         el: "#echart1",
         data: {
         },
         methods: {
            queryOderCount:function(){
               axios.get('/getAllOrderSumPriceAndConfirmTime').then(response =>{
                  console.log(response)
                  // var countOrderList=[];
                  // for(var i=0;i<response.data.data.length;i++){
                  //    countOrderList[i]=eval('('+response.data.data[i]+ ')')
                  // }
                  // console.log(countOrderList);
                  echarts_1(response.data.data);
                  this.EChart1 = response.data.data;
               }).catch(function (error) {
                  console.log(error)
               })
            },

         },
         mounted(){
            this.queryOderCount();
         }
      })

         function echarts_1(monthSalMoney) {
            var myChart = echarts.init(document.getElementById('echart1'));
            var dataIPSxAxis = ['1月', '2月', '3月', '4月 ', '5月 ', '6月', '7月', '8月','9月','10月','11月','12月'];
            var dataIPS = monthSalMoney;
            option = {
               tooltip: { trigger: 'axis', },
               color: ["#0080ff", "#4cd5ce"],
               grid: {
                  left: '20',
                  right: '35',
                  top: '10%',
                  bottom: '0%',
                  containLabel: true
               },
               xAxis: [{
                  type: 'category',
                  boundaryGap: false,
                  data: dataIPSxAxis,
                  axisLabel: {
                     show: true,
                     textStyle: {
                        color: '#777',
                        //fontSize: 12,
                     },
                  },
                  axisLine: {
                     show: false
                  }
               }],

               yAxis: [{
                  type: 'value',
                  axisLine: {
                     onZero: false,
                     show: false,
                  },
                  axisLabel: {
                     show: true,
                     textStyle: {
                        color: '#777' //字体颜色
                     }
                  },
                  splitNumber: 3,
                  splitLine: {
                     show: true,
                     lineStyle: {
                        color: '#eee',
                        type: 'dotted'
                     }
                  },
               }],
               series: [
                  {
                     name: '利润',
                     type: 'line',
                     smooth: true,
                     //  symbol: "none", //去掉折线点
                     //	 stack: 100,
                     lineStyle: {
                        normal: {
                           width: 6,
                           color: {
                              type: 'linear',

                              colorStops: [{
                                 offset: 0,
                                 color: '#A9F387' // 0% 处的颜色
                              }, {
                                 offset: 1,
                                 color: '#00a1b4' // 100% 处的颜色
                              }],
                              globalCoord: false // 缺省为 false
                           },
                           shadowColor: 'rgba(72,216,191, 0.3)',
                           shadowBlur: 10,
                           shadowOffsetY: 20
                        }
                     },
                     itemStyle: {
                        normal: {
                           color: '#fff',
                           borderWidth: 10,
                           /*shadowColor: 'rgba(72,216,191, 0.3)',
                           shadowBlur: 100,*/
                           borderColor: "#A9F387"
                        }
                     },
                     areaStyle: {

                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                           offset: 0,
                           color: 'rgba(0,161,179,.2)',
                        }, {
                           offset: 1,
                           color: 'rgba(0,161,179,.0)',
                        }], false),

                     }, symbolSize: 0, //折线点的大小
                     data: dataIPS,
                  },
               ]
            };
            myChart.setOption(option);
            window.addEventListener("resize", function () {
               myChart.resize();
            });
         }



      //订单总数图表
      function echarts_2(datadetial) {
          var chartDom = document.getElementById('echart2');
          var myChart = echarts.init(chartDom);
          var option;
          option = {
              title: {
                  text: '订单总数',
                  subtext: '湛小鲜',
                  left: 'center'
              },
              tooltip: {
                  trigger: 'item'
              },
              legend: {
                  orient: 'vertical',
                  left: 'left'
              },
              series: [
                  {
                      name: '数据详情',
                      type: 'pie',
                      radius: '50%',
                      data: datadetial,
                      //获取数据时要将下面代码注释，使用上面的
                      // data: [
                      //     {value: 1048, name: '水果类'},
                      //     {value: 735, name: '蔬菜类'},
                      //     {value: 580, name: '肉蛋类'},
                      //     {value: 484, name: '生鲜类'},
                      //     {value: 300, name: '其它'}
                      // ],
                      emphasis: {
                          itemStyle: {
                              shadowBlur: 10,
                              shadowOffsetX: 0,
                              shadowColor: 'rgba(0, 0, 0, 0.5)'
                          }
                      }
                  }
              ]
          };

          if (option && typeof option === 'object') {
              myChart.setOption(option);
          }
          window.addEventListener("resize", function () {
              myChart.resize();
          });
      }
      //获取订单总数
      new Vue({
          el: "#echart2",
          data: {
              order:[]
          },
          methods: {
              queryOderCount:function(){
                  axios.get('/countOrderStatus').then(response =>{
                     console.log(response)
                     var countOrderList=[];
                     for(var i=0;i<response.data.data.length;i++){
                        countOrderList[i]=eval('('+response.data.data[i]+ ')')
                     }
                     console.log(countOrderList);
                     echarts_2(countOrderList);
                  }).catch(function (error) {
                      console.log(error)
                  })
              },

          },
          mounted(){
              this.queryOderCount();
          }
      })

      //顾客总数图表
      // function echarts_3() {
      //     var myChart = echarts.init(document.getElementById('echart3'));
      //     var option;
      //     option = {
      //         xAxis: {},
      //         yAxis: {},
      //         series: [
      //             {
      //                 symbolSize: 20,
      //                 name:"顾客总数",
      //                 // data:datadetial,
      //                 //获取数据时要将下面代码注释，使用上面的
      //                 data: [
      //                     [10.0, 8.04],
      //                     [8.07, 6.95],
      //                     [13.0, 7.58],
      //                     [9.05, 8.81],
      //                     [11.0, 8.33],
      //                     [14.0, 7.66],
      //                     [13.4, 6.81],
      //                     [10.0, 6.33],
      //                     [14.0, 8.96],
      //                     [12.5, 6.82],
      //                     [9.15, 7.2],
      //                     [11.5, 7.2],
      //                     [3.03, 4.23],
      //                     [12.2, 7.83],
      //                     [2.02, 4.47],
      //                     [1.05, 3.33],
      //                     [4.05, 4.96],
      //                     [6.03, 7.24],
      //                     [12.0, 6.26],
      //                     [12.0, 8.84],
      //                     [7.08, 5.82],
      //                     [5.02, 5.68]
      //                 ],
      //                 type: 'scatter'
      //             }
      //         ]
      //     };
      //     if (option && typeof option === 'object') {
      //         myChart.setOption(option);
      //     }
      //     window.addEventListener("resize", function () {
      //         myChart.resize();
      //     });
      // }

      //获取顾客总数
      // new Vue({
      //     el: "#echart3",
      //     data: {
      //         user:[]
      //     },
      //     methods: {
      //         queryUserCount:function(){
      //             axios.get('/接口').then(response =>{
      //                 var datadetial = new Array();
      //             response.data.for(function (item,index) {
      //                 datadetial.push(item);
      //                 console.log("该数组为：",datadetial)
      //             })
      //             echarts_3();
      //         }).catch(function (error) {
      //                 console.log(error)
      //             })
      //         }
      //
      //     },
      //     mounted(){
      //         // this.queryUserCount();
      //        echarts_3();
      //     }
      // })

      //销售总量图表
         function echarts_4(countOrderList) {
            var myChart = echarts.init(document.getElementById('echart4'));
            var option;

            option = {
               legend: {},
               tooltip: {},
               dataset: {
                  dimensions: ['产品类别',  '1月', '2月', '3月','4月','5月', '6月', '7月','8月', '9月', '10月','11月','12月'],
                  source: countOrderList
                  // source: [
                  //    { '产品类别': '水果类', '1月': 43.3, '2月': 85.8, '3月': 93.7,'4月': 43.3,  '5月': 43.3, '6月': 85.8, '7月': 93.7,'8月': 43.3, '9月': 85.8, '10月': 93.7,'11月': 93.7,'12月': 93.7 },
                  //    { '产品类别': '蔬菜类', '8月': 83.1, '9月': 73.4, '10月': 55.1 },
                  //    { '产品类别': '肉蛋类', '8月': 86.4, '9月': 65.2, '10月': 82.5 },
                  //    { '产品类别': '生鲜类', '8月': 72.4, '9月': 53.9, '10月': 39.1 },
                  //    { '产品类别': '其它', '8月': 71.4, '9月': 52.9, '10月': 40.1 }
                  // ]
               },
               xAxis: { type: 'category' },
               yAxis: {},
               // Declare several bar series, each will be mapped
               // to a column of dataset.source by default.
               series: [{ type: 'bar' }, { type: 'bar' }, { type: 'bar' },{ type: 'bar' },{ type: 'bar' }, { type: 'bar' }, { type: 'bar' },{ type: 'bar' }, { type: 'bar' }, { type: 'bar' },{ type: 'bar' },{ type: 'bar' }]
            };
            myChart.setOption(option);
            window.addEventListener("resize", function () {
               myChart.resize();
            });
         }


      new Vue({
         el: "#echart4",
         data: {
            user:[]
         },
         methods: {
            queryUserCount:function(){
               axios.get('/getOrderAccountAndConfirmTimeAndCommodityType').then(response =>{
                  console.log(response.data.data)
                  var countOrderList=[];
                  for(var i=0;i<response.data.data.length;i++){
                     countOrderList[i]=eval('('+response.data.data[i]+ ')')
                  }
                  console.log(countOrderList);
                  echarts_4(countOrderList);
               }).catch(function (error) {
                  console.log(error)
               })
            }

         },
         mounted(){
            this.queryUserCount();
            // echarts_3();
         }
      })


   </script>
</body>

</html>